# üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ª–∏—Ü–µ–Ω–∑–∏–∏ Bitrix24

## üìÅ –§–∞–π–ª—ã –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ

### 1. `BITRIX24_LICENSE_DIAGNOSTIC.md`
**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è** –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Å –ø–æ—à–∞–≥–æ–≤—ã–º–∏ SQL –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–ª–µ–¥—É–π—Ç–µ –ø–æ—à–∞–≥–æ–≤—ã–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –ø—Ä–æ–±–ª–µ–º–∞–º –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. `license_diagnostic.php`
**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ª–∏—Ü–µ–Ω–∑–∏–∏.

**–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:**
```
https://your-domain.com/local/license_diagnostic.php
```

**–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:**
```bash
cd /path/to/bitrix/site
php local/license_diagnostic.php
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
- ‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤—Å–µ–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤
- ‚úÖ –ò—â–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ª–∏—Ü–µ–Ω–∑–∏–∏
- ‚úÖ –í—ã–¥–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å–µ—Ä–≤–µ—Ä–µ:

1. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã** –Ω–∞ —Ä–∞–±–æ—á–∏–π —Å–µ—Ä–≤–µ—Ä –≤ –ø–∞–ø–∫—É `/local/`

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç:**
   ```
   https://your-production-site.com/local/license_diagnostic.php
   ```

3. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤—ã–≤–æ–¥:**
   - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞
   - –°—Ä–∞–≤–Ω–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ª–∏–º–∏—Ç–æ–º
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∏–ø –ª–∏—Ü–µ–Ω–∑–∏–∏

4. **–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SQL –∑–∞–ø—Ä–æ—Å—ã** –∏–∑ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

## üîç –ö–ª—é—á–µ–≤—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü–æ–¥—Å—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ—á–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º Bitrix24):
```sql
SELECT COUNT(DISTINCT U.ID) as active_users
FROM b_user U
    INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
    INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_ID = U.ID AND UF.VALUE_INT > 0
WHERE U.ACTIVE = 'Y' AND U.LAST_LOGIN IS NOT NULL;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π:
```sql
SELECT 
    NAME,
    VALUE,
    CASE 
        WHEN NAME = 'PARAM_MAX_USERS' AND VALUE = '0' THEN '–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π'
        WHEN NAME = 'PARAM_MAX_USERS' THEN CONCAT('–õ–∏–º–∏—Ç: ', VALUE, ' –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π')
        ELSE VALUE 
    END as description
FROM b_option 
WHERE MODULE_ID = 'main' AND NAME IN ('PARAM_MAX_USERS', '~license_name');
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** –î–ª—è –∑–∞–ø—É—Å–∫–∞ PHP —Å–∫—Ä–∏–ø—Ç–∞ –Ω—É–∂–Ω—ã –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ü–æ—Å–ª–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —É–¥–∞–ª–∏—Ç–µ PHP —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫ –Ω–µ–º—É –¥–æ—Å—Ç—É–ø
3. **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏:** –î–µ–ª–∞–π—Ç–µ backup –ë–î –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –∫–æ–ø–∏–∏ —Ä–∞–±–æ—á–µ–π –ë–î

## üìû –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

### –ï—Å–ª–∏ –ª–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω:
1. **–õ–µ–≥–∞–ª—å–Ω–æ:** –û–±–Ω–æ–≤–∏—Ç–µ –ª–∏—Ü–µ–Ω–∑–∏—é —É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ Bitrix24
2. **–í—Ä–µ–º–µ–Ω–Ω–æ:** –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
3. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:** –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–∏–º–∏—Ç–∞ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

### –ï—Å–ª–∏ –ª–∏–º–∏—Ç –ù–ï –ø—Ä–µ–≤—ã—à–µ–Ω, –Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –ë–î
2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à Bitrix24
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ JavaScript —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
4. –ò—â–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

**–°–æ–∑–¥–∞–Ω–æ:** $(date)  
**–î–ª—è –ø—Ä–æ–µ–∫—Ç–∞:** –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ª–∏—Ü–µ–Ω–∑–∏–∏ Bitrix24  
**–ê–≤—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä