# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö —è–¥—Ä–∞ Bitrix24

## –û—Å–Ω–æ–≤–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–§–∞–π–ª:** `bitrix/modules/tasks/lib/helper/filter.php`

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:

```php
// –°—Ç—Ä–æ–∫–∞ 1010 - –¥–æ–±–∞–≤–ª–µ–Ω 'enumeration' –≤ availableTypes
$availableTypes = ['datetime', 'string', 'double', 'boolean', 'enumeration'];

// –°—Ç—Ä–æ–∫–∞ 1026 - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ enumeration –≤ list
else if ($type === 'enumeration')
{
    $type = 'list';
}

// –°—Ç—Ä–æ–∫–∏ 1042-1062 - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π enum
else if ($type === 'list' && $item['USER_TYPE_ID'] === 'enumeration')
{
    // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è enum –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    $enumItems = [];
    $enumValues = \CUserFieldEnum::GetList(
        ['SORT' => 'ASC'],
        ['USER_FIELD_ID' => $item['ID']]
    );
    while ($enumValue = $enumValues->Fetch())
    {
        $enumItems[$enumValue['ID']] = $enumValue['VALUE'];
    }
    
    $filter[$item['FIELD_NAME']] = [
        'id' => $item['FIELD_NAME'],
        'name' => $item['EDIT_FORM_LABEL'],
        'type' => 'list',
        'items' => $enumItems,
        'uf' => true,
    ];
}

// –°—Ç—Ä–æ–∫–∞ 365 - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ö–µ–º—ã UF –ø–æ–ª–µ–π
$ufScheme = $this->getUF();

// –°—Ç—Ä–æ–∫–∏ 380-388 - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ enum –ø–æ–ª–µ–π
$isEnumField = isset($ufScheme[$fieldId]) && $ufScheme[$fieldId]['USER_TYPE_ID'] === 'enumeration';

if ($isEnumField) {
    // –î–ª—è enum –ø–æ–ª–µ–π –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ—Ñ–∏–∫—Å % (–¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)
    $ufFilter[$fieldId] = $this->getFilterFieldData($fieldId);
} else {
    // –î–ª—è –æ–±—ã—á–Ω—ã—Ö —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø–æ–ª–µ–π –¥–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ—Ñ–∏–∫—Å % (–¥–ª—è LIKE –ø–æ–∏—Å–∫–∞)
    $ufFilter["%{$fieldId}"] = $this->getFilterFieldData($fieldId);
}
```

## –ü—Ä–æ–±–ª–µ–º–∞

–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è enum –ø–æ–ª—è:
1. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–ª–∏—Å—å –≤ —Ç–∏–ø 'string'
2. –ü–æ–ª—É—á–∞–ª–∏ –ø—Ä–µ—Ñ–∏–∫—Å `%` –¥–ª—è LIKE –ø–æ–∏—Å–∫–∞ 
3. –ù–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã –¥–ª—è UI

## –†–µ—à–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è enum –ø–æ–ª—è:
1. ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è –∫–∞–∫ —Ç–∏–ø 'enumeration' 
2. ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Ç–∏–ø 'list' –¥–ª—è UI
3. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ë–î
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ ID –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `%`

## –†–µ–∑—É–ª—å—Ç–∞—Ç

- üéØ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö enum –ø–æ–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- üîí **–¢–æ—á–Ω–æ—Å—Ç—å** - —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ LIKE –ø–æ–∏—Å–∫–∞
- üé® **UI** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- ‚ö° **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã